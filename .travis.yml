sudo: required
language: python
python:
  - '3.6'

services:
  - docker

install: true

script:
  # just check that the script works
  - ./scripts/initialise_docker_environment.sh

  # build assets generation container
  - docker-compose -f docker-compose-generation.yml build assets

  # setup integration test requirements
  - ./scripts/integration_test_setup.sh
  
  # run integration tests
  - docker-compose -f docker-compose-test.yml run --no-deps integration-test test

after_script:
  - ./scripts/kill_all.sh
