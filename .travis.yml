sudo: required
language: python
python:
  - '3.6'

services:
  - docker

before_script:
  - ./scripts/initialise_docker_environment.sh

script:
  # just check that the images exist
  - docker-compose pull
  - docker-compose -f docker-compose-connect.yml pull

  # build generation container
  - docker-compose -f docker-compose-generation.yml build assets
  # generate assets
  - docker-compose -f docker-compose-generation.yml run assets generate

after_script:
  - ./scripts/kill_all.sh
