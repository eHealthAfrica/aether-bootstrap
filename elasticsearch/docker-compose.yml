version: "2.1"

networks:
  aether:
    external:
      name: aether_bootstrap_net

volumes:
  elasticsearch-data:

services:
  
  elasticsearch:
    extends:
      file: docker-compose-base.yml
      service: elasticsearch-base
    volumes:
      - elasticsearch-data:/usr/share/elasticsearch/data
      - ./conf/log4j2.properties:/usr/share/elasticsearch/config/log4j2.properties
      - ./conf/security.yml:/usr/share/elasticsearch/plugins/opendistro_security/securityconfig/config.yml
      # - ./conf/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml
    networks:
      - aether

  kibana:
    extends:
      file: docker-compose-base.yml
      service: kibana-base
    depends_on:
      - elasticsearch
    networks:
      - aether

  consumer:
    extends:
      file: docker-compose-base.yml
      service: es-consumer-base
    networks:
      - aether
